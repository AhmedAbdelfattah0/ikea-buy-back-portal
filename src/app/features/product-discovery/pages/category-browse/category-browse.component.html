<div class="category-browse-page">
  <!-- Two Column Layout -->
  <div class="browse-layout">
    <!-- Left Column: Search + Categories + Products -->
    <div class="browse-layout__left">
      <!-- Header -->
      <div class="page-header">
        <h1 class="page-title">{{ translations().productDiscovery.title }}</h1>
        <p class="page-subtitle">{{ translations().productDiscovery.selectCategory }}</p>
      </div>

      <!-- Search -->
      <div class="search-section">
        <div class="search-input-wrapper">
          <input
            type="text"
            class="search-input"
            [placeholder]="translations().productDiscovery.searchPlaceholder"
            [value]="searchQuery()"
            (input)="onSearchInput($event)"
          />
          @if (searchQuery()) {
            <button
              type="button"
              class="search-clear"
              (click)="clearSearch()"
              attr.aria-label="{{ translations().common.close }}"
            >
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 5L5 15M5 5L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          }
          <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="2"/>
            <path d="M12.5 12.5L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
      </div>

      <!-- Main Content Area with Categories and Products -->
      <div class="content-area">
        <!-- Categories Navigation -->
        <div class="categories-section">
          <app-category-tree (categorySelected)="onCategorySelected($event)"></app-category-tree>
        </div>

        <!-- Products Grid (shown when category selected) -->
        @if (selectedCategory()) {
          <div class="products-section">
            <div class="products-header">
              <h2 class="products-title">{{ selectedCategory()!.name }}</h2>
            </div>
            <app-product-grid
              [products]="filteredProducts()"
              [isLoading]="isLoading()"
              (productSelected)="onProductSelected($event)"
            ></app-product-grid>
          </div>
        }
      </div>

      <!-- Info Message -->
      <div class="info-message">
        <p>{{ translations().productDiscovery.selectProduct }}</p>
      </div>
    </div>

    <!-- Right Column: Buyback List Sidebar -->
    <div class="browse-layout__right">
      <app-buyback-sidebar></app-buyback-sidebar>
    </div>
  </div>

  <!-- Condition Selector Modal -->
  <app-condition-selector></app-condition-selector>
</div>
